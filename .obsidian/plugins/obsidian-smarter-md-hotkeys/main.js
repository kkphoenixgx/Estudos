/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Y=Object.create;var x=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var ee=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty;var H=s=>x(s,"__esModule",{value:!0});var ne=(s,i)=>{H(s);for(var o in i)x(s,o,{get:i[o],enumerable:!0})},re=(s,i,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let e of M(i))!te.call(s,e)&&e!=="default"&&x(s,e,{get:()=>i[e],enumerable:!(o=Z(i,e))||o.enumerable});return s},ie=s=>re(H(x(s!=null?Y(ee(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);ne(exports,{default:()=>D});var $=!1,F=[{id:"smarter-asterisk-bold",name:"Smarter Bold",before:"**",after:"**"},{id:"smarter-underscore-bold",name:"Smarter Underscore Bold",before:"__",after:"__"},{id:"smarter-asterisk-italics",name:"Smarter Italics",before:"*",after:"*"},{id:"smarter-underscore-italics",name:"Smarter Underscore Italics",before:"_",after:"_"},{id:"smarter-comments",name:"Smarter Comments",before:"%%",after:"%%"},{id:"smarter-html-comments",name:"Smarter HTML Comments",before:"<!--",after:"-->"},{id:"smarter-inline-code",name:"Smarter Code (Inline/Fenced)",before:"`",after:"`"},{id:"smarter-highlight",name:"Smarter Highlight",before:"==",after:"=="},{id:"smarter-bold-highlight",name:"Smarter Bold & Highlight",before:"**==",after:"==**"},{id:"smarter-italics-highlight",name:"Smarter Italics & Highlight",before:"*==",after:"==*"},{id:"smarter-strikethrough",name:"Smarter Strikethrough",before:"~~",after:"~~"},{id:"smarter-wikilink",name:"Smarter Wikilink (Internal Link)",before:"[[",after:"]]"},{id:"smarter-wikilink-heading",name:"Smarter Wikilink to Heading",before:"[[##",after:"]]"},{id:"smarter-md-link",name:"Smarter Markdown Link/Image",before:"[",after:"]()"},{id:"smarter-math",name:"Smarter Mathjax",before:"$",after:"$"},{id:"smarter-callout-label",name:"Smarter Callout Label",before:"> [!",after:`]
> `},{id:"smarter-quotation-marks",name:"Smarter Quotation Mark",before:'"',after:'"'},{id:"smarter-round-brackets",name:"Smarter Round Brackets",before:"(",after:")"},{id:"smarter-square-brackets",name:"Smarter Square Brackets",before:"[",after:"]"},{id:"smarter-curly-brackets",name:"Smarter Curly Brackets",before:"{",after:"}"},{id:"smarter-delete",name:"Smarter Delete Text",before:"delete",after:""},{id:"smarter-upper-lower",name:"Smarter Upper/Lower Case",before:"upper-lower",after:""},{id:"smarter-insert-new-line",name:"Smarter Insert New Line",before:"new-line",after:""}],G=[{id:"smarter-delete-current-file",name:"Smarter Delete Current Note"},{id:"smarter-copy-path",name:"Smarter Copy Relative/Absolute Path"},{id:"smarter-copy-file-name",name:"Smarter Copy File Name"}],X=/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()[\]{};:'".,<>?«»“”‘’]))$/,k=['"',"(","[","###### ","##### ","#### ","### ","## ","# ","- [ ] ","- [x] ","- ",">"," ",`
`,"	"],q=['"',")","](","]",`
`,"	"," "],j=[["#",""],["",":"],["[[","]]"],["","]]"],["[[",""],['"','"'],["'","'"],["(",")"],["[","] "],["$",""],["","\u20AC"]],z=["png","jpg","jpeg","gif","tiff"];var b=ie(require("obsidian")),I=(s,i)=>s.line===i.line&&s.ch===i.ch,ae=(s,i)=>I(s.anchor,i.anchor)&&I(s.head,i.head),D=class extends b.Plugin{async onload(){F.forEach(i=>{let{id:o,name:e,before:f,after:p}=i;this.addCommand({id:o,name:e,editorCallback:d=>this.expandAndWrap(f,p,d)})}),G.forEach(i=>{let{id:o,name:e}=i;this.addCommand({id:o,name:e,callback:()=>this.otherCommands(o)})}),console.log("Smarter MD Hotkeys loaded.")}async onunload(){console.log("Smarter MD Hotkeys unloaded.")}async otherCommands(i){let o=this.app.workspace.getActiveFile();if(!!o){if(i==="smarter-delete-current-file"){let e=f=>this.app.commands.executeCommandById(f);e("app:delete-file"),e("app:go-back"),e("app:go-back"),new b.Notice('"'+o.name+'" deleted.')}else if(i==="smarter-copy-path"){let e,f=o.path,p=this.app.vault.adapter.basePath+"/"+f,d;f.includes("/")?d=f.replace(/(.*)\/.*/,"$1"):d="/";let c=await navigator.clipboard.readText();c===f?(await navigator.clipboard.writeText(p),e=`Absolute path copied: 
`+p):c===p?(await navigator.clipboard.writeText(d),e=`Parent Folder copied: 
`+d):(await navigator.clipboard.writeText(f),e=`Relative path copied: 
`+f),new b.Notice(e,7e3)}else if(i==="smarter-copy-file-name"){let e=await navigator.clipboard.readText(),f=o.basename;e===f&&(f+="."+o.extension),await navigator.clipboard.writeText(f),new b.Notice(`File Name copied: 
`+f)}}}async expandAndWrap(i,o,e){let f=()=>e.posToOffset(e.getCursor("from")),p=()=>e.posToOffset(e.getCursor("to")),d=()=>e.getValue().length,c=t=>(t<0&&(t=0),t>d()&&(t=d()),e.offsetToPos(t));function T(t,n){let r=f(),a=p();if(r-t.length<0||a-n.length>d())return!1;let m=e.getRange(c(r-t.length),c(r)),l=e.getRange(c(a),c(a+n.length));return m===t&&l===n}let L=()=>["`","%%","<!--","$"].includes(i),C=()=>T(i,o);function y(t,n){if(t.line===0||n.line===e.lastLine())return!1;let r=e.getLine(t.line-1),a=e.getLine(n.line+1);return r.startsWith(i)&&a.startsWith(o)}let W=()=>!e.somethingSelected(),R=()=>e.getSelection().includes(`
`);function v(t){if(t<e.lastLine()){let n={line:t,ch:0},r={line:t+1,ch:0};e.replaceRange("",n,r)}else{let n={line:t-1,ch:e.getLine(t).length},r={line:t,ch:e.getLine(t).length};e.replaceRange("",n,r)}}function u(t,n){if(!$)return;let r="";n&&(r=': "'+e.getSelection()+'"'),t.startsWith(`
`)||(t="- "+t),console.log(t+r)}function P(t){if(C()&&W())return{anchor:t,head:t};let n,r;if(i!=="`"){if(e.cm instanceof window.CodeMirror)return e.cm.findWordAt(t);let a=e.cm.state.wordAt(e.posToOffset(t));if(!a)return{anchor:t,head:t};r=c(a.from),n=c(a.to)}if(i==="`"||i==="$"){u("Getting Code under Cursor");let a=e.posToOffset(t),m,l,[S,g,N,_]=[0,0,!1,!1];for(;!/\s/.test(l)&&!_;)l=e.getRange(c(a-(S+1)),c(a-S)),S++,a-(S-1)==0&&(_=!0);for(;!/\s/.test(m)&&!N;)m=e.getRange(c(a+g),c(a+g+1)),g++,a+(g-1)===d()&&(N=!0);r=c(a-(S-1)),n=c(a+(g-1))}return{anchor:r,head:n}}function O(){let t=q,n=k;L()?(n=[i],t=[o]):o&&(n.push(i),t.push(o));let r=e.getSelection(),a=f();u("before trim",!0);let m=!1;for(;!m;){let S=0;n.forEach(g=>{r.startsWith(g)?(r=r.slice(g.length),a+=g.length):S++}),(S===n.length||!r.length)&&(m=!0)}for(m=!1;!m;){let S=0;t.forEach(g=>{r.endsWith(g)?r=r.slice(0,-g.length):S++}),(S===t.length||!r.length)&&(m=!0)}let l=r.match(/ \^\w+$/);l&&(r=r.slice(0,-l[0].length)),e.setSelection(c(a),c(a+r.length)),u("after trim",!0)}function w(){O(),u("before expandSelection",!0);let t=e.getCursor("from"),n=e.getCursor("to"),r=P(t),a=P(n);if(!I(t,n)&&n.ch>0){let l=P({...n,ch:n.ch-1});ae(a,l)||(a=l)}return e.setSelection(r.anchor,a.head),u("after expandSelection",!0),O(),j.forEach(l=>{l[0]===i||l[1]===o||T(l[0],l[1])&&(r.anchor.ch-=l[0].length,a.head.ch+=l[1].length,e.setSelection(r.anchor,a.head))}),{anchor:t,head:n}}function U(t){return A.forEach(n=>{t.line===n.line&&(t.ch+=n.shift)}),t}function B(t,n,r){let a=e.getSelection(),m=f(),l=p();W()&&r==="multi"||(C()||(["%%","<!--"].includes(i)&&(a=" "+a+" ",l=l+2,h++,E++),e.replaceSelection(i+a+o),A.push({line:t.line,shift:h},{line:n.line,shift:E}),t.ch+=h,n.ch+=h),C()&&(e.setSelection(c(m-h),c(l+E)),e.replaceSelection(a),A.push({line:t.line,shift:-h},{line:n.line,shift:-E}),t.ch-=h,n.ch-=h),r==="single"&&e.setSelection(t,n))}function Q(){let t=e.getCursor("from");t.ch=0;let n=e.getCursor("to");if(n.ch=e.getLine(n.line).length,i==="`"?(i="```",o="```",E=3,h=3):i==="$"&&(i="$$",o="$$",E=2,h=2),!y(t,n)&&(e.setSelection(t),e.replaceSelection(i+`
`),n.line++,e.setSelection(n),e.replaceSelection(`
`+o),i==="```")){let r=t;r.ch=3,e.setSelection(r)}y(t,n)&&(v(t.line-1),v(n.line))}async function V(){let t=X,n=(await navigator.clipboard.readText()).trim(),r=i,a=o;if(t.test(n)){a="]("+n+")";let m=n.split(".").pop();z.includes(m)&&(r="![")}return[r,a]}function J(){if(T(" ","")){let t=e.getCursor("from"),n=e.getCursor("to");t.ch&&t.ch--,e.setSelection(t,n)}e.replaceSelection("")}function K(t,n){let r=e.getSelection();r.toUpperCase()===r?r=r.toLowerCase():r=r.toUpperCase(),e.replaceSelection(r),e.setSelection(t,n)}if(u(`
SmarterMD Hotkeys triggered
---------------------------`),i==="new-line"){e.newlineOnly();return}o==="]()"&&([i,o]=await V());let h=i.length,E=o.length,A=[];e.listSelections().forEach(t=>{if(t.anchor=U(t.anchor),t.head=U(t.head),e.setSelection(t.anchor,t.head),O(),i==="delete")u("Smart Delete"),w(),J();else if(i==="upper-lower"){u("Smart Upper/Lower Case");let{anchor:n,head:r}=w();K(n,r)}else if(R()){if(R()&&L())u("Multiline Wrap"),Q();else if(R()&&!L()){let n=f(),r=e.getSelection().split(`
`);u("lines: "+r.length.toString()),r.forEach(a=>{console.log(""),e.setSelection(c(n),c(n+a.length));let{anchor:m,head:l}=w();n+=a.length+1,C()?n-=h+E:n+=h+E,B(m,l,"multi")})}}else{u("single line");let{anchor:n,head:r}=w();B(n,r,"single")}})}};
